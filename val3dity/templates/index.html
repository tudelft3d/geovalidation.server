{% extends "layout.html" %}
{% block body %}

  <div class="page-header">
    <h2><img src="{{ url_for('static', filename='img/val3dity.png') }}" width=250 alt=""/><br>geometric validation of GML 3D primitives</h2>
  </div>
      
  <div class="well">
  <form class="form-horizontal" role="form" action="" method=post enctype=multipart/form-data>
    <div class="form-group">
      <label class="col-sm-4 control-label">Input GML file <i class="fa fa-question-circle" data-toggle="tooltip" title="any GML file containing one or more gml:Solid" ></i></label>
      <div class="col-sm-8">
          <div class="fileinput fileinput-new" data-provides="fileinput">
          <span class="btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span><input type="file" name="file"></span>
          <span class="fileinput-filename"></span>
          <a href="#" class="close fileinput-exists" data-dismiss="fileinput" style="float: none">&times;</a>
        </div>
      </div>
    </div>  

    <div class="form-group">
      <label class="col-sm-4 control-label">3D primitives <i class="fa fa-question-circle" data-toggle="tooltip" title="which 3D primitives to validate?" ></i></label>
      <div class="col-sm-8">
        <div class="btn-group" data-toggle="buttons">
          <label class="btn btn-default active">
            <input type="radio" name="primitives" value="solid" checked> gml:Solids
          </label>
          <label class="btn btn-default">
            <input type="radio" name="primitives" value="ms"> gml:MultiSurfaces 
          </label>
        </div>
      </div>
    </div> 

    <div class="form-group">
      <label class="col-sm-4 control-label">Snap tolerance <i class="fa fa-question-circle" data-toggle="tooltip" title="if 2 points are closer then this value then we assume they are the same" ></i></label>
      <div class="col-sm-8">
        <input name="snap_tolerance" type="text" class="form-control" value="0.001">
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-4 control-label">Planarity tolerance <i class="fa fa-question-circle" data-toggle="tooltip" title="maximum distance between a point and a fitted plane" ></i></label>
      <div class="col-sm-8">
        <input name="planarity_d2p_tolerance" type="text" class="form-control" value="0.01">
      </div>
    </div>
    

    <div class="form-group">
      <div class="col-sm-offset-4 col-sm-8">
        <button type="submit" class="btn btn-default">Upload + validate</button>
      </div>
    </div>

  </form>
  </div>

{% if jobid %}
  <div class="alert alert-success">
    <p>File successfully uploaded.</p>
    <p>The ID for your validation task is {{ jobid }}.</p>
    <p>The validation report will soon be available <a href="{{ url_for('index') }}reports/{{ jobid }}">there</a>; it might take a few minutes, depending on the size of the file.</p>
  </div>
{% endif %}

{% if problem %}
  <div class="alert alert-danger">
    <p>{{ problem }}</p>
  </div>
{% endif %}

{% endblock %}