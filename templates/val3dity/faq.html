
{% extends "val3dity/layout.html" %}
{% block body %}
<title>val3dity: geometric validation of solids according to ISO19107</title>  
<h2 id="faq">faq</h2>

<ul>
    <li><a href="#what-do-you-do-with-my-uploaded-file">What do you do with my uploaded file?</a></li>
    <li><a href="#how-should-i-interpret-the-report">How should I interpret the report?</a></li>
    <li><a href="#what-is-the-snap-tolerance-i-need-to-setup-when-i-upload-a-file">What is the snap tolerance I need to setup when I upload a file?</a></li>
    <li><a href="#i-dont-see-all-the-errors-in-my-solid">I don&#8217;t see all the errors in my solid.</a></li>
    <li><a href="#im-sure-that-my-solid-is-okay-ive-double-checked-and-yet-the-validator-says-that-something-is-wrong">I&#8217;m sure that my solid is okay, I&#8217;ve double-checked, and yet the validator says that something is wrong.</a></li>
    <li><a href="#the-validation-report-says-that-there-are-no-solids-in-my-file-but-i-can-see-the-buildings-with-my-viewer">The validation report says that there are no solids in my file, but I can see the buildings with my viewer!</a></li>
    <li><a href="#the-server-says-my-file-is-too-big-whats-the-maximum">The server says my file is too big, what&#8217;s the maximum?</a></li>
    <li><a href="#in-the-report-the-id-for-the-shells-and-surfaces-are-they-0-based-or-1-based">In the report, the ID for the shells and surfaces, are they 0-based or 1-based?</a></li>
    <li><a href="#i-dont-have-ids-for-my-__gmlsolid__-and-this-is-annoying">I don&#8217;t have IDs for my <strong>gml:Solid</strong>, and this is annoying.</a></li>
  </ul>

<hr />

<h3 id="what-do-you-do-with-my-uploaded-file">What do you do with my uploaded file?</h3>

<p>We delete it right after having validated it, we promise. The report is however available to everyone (if they know its ID).</p>

<hr />

<h3 id="how-should-i-interpret-the-report">How should I interpret the report?</h3>

<script src="https://gist.github.com/hugoledoux/11082609.js"></script>

<p>The report lists only the solids that are <em>not</em> valid, and gives one or more <a href="/val3dity/errors">errors</a> for each. If your solids have <strong>gml:id</strong> then these are used to report the errors, if not then the number means the order of the solids in the file (the first one being 1). We offer a <a href="/val3dity/addgmlids">small service</a> that adds a <strong>gml:id</strong> to all the <strong>gml:Solid</strong> in your file. If a surface is reported invalid, then the ID of the surface is also based on the order of the surfaces in one <strong>gml:Shell</strong>; -1 means that it&#8217;s not relevant. Some examples, referring to the example above. The 25th solid in the file is invalid because the 14th surface of its first shell is non-planar; the 41st solid is invalid because all the normals of its third shell are the wrong orientation (-1 means that the error is for no specific surface); the 666th solid has 2 shells that are face adjacent, one of them being the 2nd one (its 3rd surface is touching another one). All the other solids in the file are valid.</p>

<hr />

<h3 id="what-is-the-snap-tolerance-i-need-to-setup-when-i-upload-a-file">What is the snap tolerance I need to setup when I upload a file?</h3>

<p>Geometries modelled in GML store amazingly very little topological relationships. A cube is for instance represented with 6 surfaces, all stored independently. This means that the coordinates xyz of a single vertex (where 3 surfaces &#8220;meet") is stored 3 times. It is possible that these 3 vertices are not exactly at the same location (eg (0.01, 0.5, 1.0), (0.011, 0.49999, 1.00004) and (0.01002, 0.5002, 1.0007)), and that would create problems when validating since there would for example be holes in the cube. The snap tolerance basically gives a threshold that says: &#8220;if 2 points are closer then <em>X</em>, then we assume that they are the same&#8221;. It&#8217;s setup by default to be 1mm. </p>

<hr />

<h3 id="i-dont-see-all-the-errors-in-my-solid">I don&#8217;t see all the errors in my solid.</h3>

<p>It&#8217;s normal: as shown in the figure below, a solid is validated <em>hierarchically</em>, ie first every surface (a polygon embedded in 3D) is validated in 2D (by projecting it to a plane), then every shell is validated, and finally the interactions between the shells are analysed to verify whether the solid is valid. If at one stage there are errors, then the validation stops to avoid &#8220;cascading errors&#8221;. So if you get the error &#8220;210 NON_PLANAR_SURFACE&#8221;, then fix it and re-run the validator again. That does mean that you might have to upload your file and get it validated several times&#8212;if that becomes too tedious we strongly suggest you to download the <a href="https://github.com/tudelft-gist/val3dity">code</a>, compile it and run it locally (it&#8217;s open-source and free to use).</p>

<p><img src="/img/steps.png" alt="" /></p>

<hr />

<h3 id="im-sure-that-my-solid-is-okay-ive-double-checked-and-yet-the-validator-says-that-something-is-wrong">I&#8217;m sure that my solid is okay, I&#8217;ve double-checked, and yet the validator says that something is wrong.</h3>

<p>It&#8217;s possible that there are bugs in <a href="https://github.com/tudelft-gist/val3dity">val3dity</a>. Please <a href="https://github.com/tudelft-gist/val3dity/issues">report the issue</a>.</p>

<hr />

<h3 id="the-validation-report-says-that-there-are-no-solids-in-my-file-but-i-can-see-the-buildings-with-my-viewer">The validation report says that there are no solids in my file, but I can see the buildings with my viewer!</h3>

<p>There are many (or more precisely: <a href="http://erouault.blogspot.nl/2014/04/gml-madness.html">too many</a>) ways to model a volume/polyhedron in GML (eg a building in CityGML), but usually practitioners do it with either <strong>gml:Solid</strong> or <strong>gml:MultiSurface</strong>. See the same simple volumetric objects, first modelled with a <strong>gml:Solid</strong> and then with <strong>gml:MultiSurface</strong>:</p>

<script src="https://gist.github.com/hugoledoux/10551725.js"></script>

<script src="https://gist.github.com/hugoledoux/10551979.js"></script>

<p>Our validator only checks the former. The reason is simple: if an object is modelled with <strong>gml:MultiSurface</strong> and the set of surfaces is not watertight, then it would be wrong to report that the object is not valid&#8230; However, if a building is watertight, then in our opinion it is good practice to model it with <strong>gml:Solid</strong>.</p>

<hr />

<h3 id="the-server-says-my-file-is-too-big-whats-the-maximum">The server says my file is too big, what&#8217;s the maximum?</h3>

<p>50MB. If you need more, <a href="/val3dity/contact">get in touch</a> or download the <a href="https://github.com/tudelft-gist/val3dity">code</a>, compile it and run val3dity locally.</p>

<hr />

<h3 id="in-the-report-the-id-for-the-shells-and-surfaces-are-they-0-based-or-1-based">In the report, the ID for the shells and surfaces, are they 0-based or 1-based?</h3>

<p>1-based.</p>

<h3 id="i-dont-have-ids-for-my-__gmlsolid__-and-this-is-annoying">I don&#8217;t have IDs for my <strong>gml:Solid</strong>, and this is annoying.</h3>

<p>We offer a <a href="/val3dity/addgmlids">small service</a> that adds a <strong>gml:id</strong> to all the <strong>gml:Solid</strong> in your file.</p>

{% endblock %}
