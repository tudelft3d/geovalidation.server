
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <link href="{{ url_for('static', filename='css/report.css') }}" rel="stylesheet">
        <title>val3dity report</title>
    </head>

    <body>
        <div id="header">
            <div class="content">
                <h1>val3dity report
                </h1>
            </div>
        </div>

        <table id="input">
            <tr>
                <td> Input file: </td>
                <td id="in_file"></td>
            </tr>
            <tr>
                <td>val3dity version:</td>
                <td id=version></td>
            </tr>
            <tr>
                <td>Validation time:</td>
                <td id=time></td>
            </tr>
        </table>

        <h3>Parameters used for validation</h3>
        <table id="params">
            <tr>
                <td>
                    <a href="http://geovalidation.bk.tudelft.nl/val3dity/usage/#planarity-d2p-tol" target="_blank">
                        planarity_d2p_tol:
                    </a>
                </td>
                <td id=planarity_d2p_tol></td>
            </tr>
            <tr>
                <td>
                    <a href="http://geovalidation.bk.tudelft.nl/val3dity/usage/#planarity-n-tol" target="_blank">
                        planarity_n_tol:
                    </a>
                </td>
                <td id=planarity_n_tol></td>
            </tr>
            <tr>
                <td>
                    <a href="http://geovalidation.bk.tudelft.nl/val3dity/usage/#snap-tol" target="_blank">
                        snap_tol:
                    </a>
                </td>
                <td id=snap_tol></td>
            </tr>
            <tr>
                <td>
                    <a href="http://geovalidation.bk.tudelft.nl/val3dity/usage/#overlap-tol" target="_blank">
                        overlap_tol:
                    </a>
                </td>
                <td id=overlap_tol></td>
            </tr>
        </table>

        <h3>Validation summary</h3>

        <script type="text/javascript">
            var report = {{ thereport | tojson }}; 
        </script>
        <script src="{{ url_for('static', filename='js/val3dityconfig.js') }}"></script>
        <script type="text/javascript">
            idx_validation_summary();
            document.getElementById("joidlink").href = "{{ url_for('reports_cityobjects', jobid=myjobid) }}";
            // Populate index.html with the validation results from the json report
            document.getElementById("in_file").innerHTML = report.input_file.split("/").pop();
            document.getElementById("version").innerHTML = report.val3dity_version;
            document.getElementById("time").innerHTML = report.time;
            document.getElementById("planarity_d2p_tol").innerHTML = report.planarity_d2p_tol;
            document.getElementById("planarity_n_tol").innerHTML = report.planarity_n_tol;
            document.getElementById("snap_tol").innerHTML = report.snap_tol;
            document.getElementById("overlap_tol").innerHTML = report.overlap_tol;
            document.write('<br>');
            error_overview();
        </script>

    </body>
</html>

